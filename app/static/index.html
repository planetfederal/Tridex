<!DOCTYPE html>
<html>
    <head>
        <title>Gabon Advance</title>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="theme/app/img/favicon.ico">
        
        <!-- Ext resources -->
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/xtheme-gray.css" />
        <script type="text/javascript" src="externals/ext/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="externals/ext/ext-all.js"></script>

        <!-- OpenLayers resources -->
        <link rel="stylesheet" type="text/css" href="externals/openlayers/theme/default/style.css" />
        <script type="text/javascript" src="script/OpenLayers.js"></script>

        <!-- GeoExt resources -->
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/popup.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/layerlegend.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/gxtheme-gray.css" />
        <script type="text/javascript" src="script/GeoExt.js"></script> 

        <!-- gxp resources -->
        <link rel="stylesheet" type="text/css" href="externals/gxp/src/theme/all.css" />
        <script type="text/javascript" src="script/gxp.js"></script>
        
        <!-- proj4js resources -->
        <!--
        <script type="text/javascript" src="externals/proj4js/lib/proj4js-compressed.js"></script>
        -->

        <!-- PrintPreview resources -->
        <link rel="stylesheet" type="text/css" href="externals/PrintPreview/resources/css/printpreview.css">
        <script type="text/javascript" src="script/PrintPreview.js"></script>

        <!-- app resources -->
        <link rel="stylesheet" type="text/css" href="theme/app/style.css" />
        <!--[if IE]><link rel="stylesheet" type="text/css" href="theme/app/ie.css"/><![endif]-->        
        <script type="text/javascript" src="script/app.js"></script>
        <script type="text/javascript" src="script/ux.js"></script>

        <script type="text/javascript">

            var i18n = function(obj, key) {
                return GeoExt.Lang.dict[GeoExt.Lang.locale][obj][key]
            };

            GeoExt.Lang.add("en", {
                "app": {
                    "layersTitle": "Layers",
                    "legendTitle": "Legend"
                }
            });

            GeoExt.Lang.add("fr", {
                "app": {
                    "layersTitle": "Couches",
                    "legendTitle": "Légende"
                }
            });

            var params = Ext.urlDecode(window.location.search.substring(1));
            if (params.lang) {
                GeoExt.Lang.set(params.lang);
            } else {
                GeoExt.Lang.set("en");
            }
            Ext.QuickTips.init();
            Ext.BLANK_IMAGE_URL = "externals/openlayers/theme/default/img/blank.gif";
            OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;
            OpenLayers.ImgPath = "externals/openlayers/img/";
            OpenLayers.Layer.WMS.prototype.DEFAULT_PARAMS.transparent = true;

            var app = new gxp.Viewer({
                proxy: "proxy/?url=",
                portalItems: [{
                    region: "center",
                    layout: "border",
                    border: false,
                    items: [
                        {
                            region: "north",
                            border: false,
                            height: 25,
                            layout: "hbox",
                            defaults: {border: false, plain: true},
                            layoutConfig: {
                                align: 'stretch',
                                pack: 'start'
                            },
                            items: [
                                {flex: 1, html: "<div class='appTitle'>Gabon Advance</div>"},
                                {width: 100, html: '<ul class="inline-list"><li><a title="This page in English" href="?lang=en">English</a></li><li class="pipe">&nbsp;</li><li><a title="Cette page en fran&ccedil;ais" href="?lang=fr">Fran&ccedil;ais</a></li></ul>'}
                            ]
                        }, {
                            region: "west",
                            border: false,
                            layout: "accordion",
                            split: true,
                            collapsible: true,
                            collapseMode: "mini",
                            header: false,
                            width: 250,
                            items: [
                                {
                                    region: "center",
                                    autoScroll: true,
                                    title: i18n("app", "layersTitle"),
                                    id: "tree",
                                    border: false
                                }, {
                                    region: "south",
                                    autoScroll: true,
                                    border: false,
                                    id: "legend",
                                    title: i18n("app", "legendTitle")
                                }
                            ]
                        }, {
                            region: "center",
                            layout: "card",
                            id: "panel",
                            tbar: [],
                            defaults: {
                                border: false
                            },
                            items: [
                                "map", {
                                    xtype: 'gxp_googleearthpanel',
                                    mapPanel: "map"
                                }
                            ],
                            activeItem: 0
                        }
                    ]
                }],
                tools: [
                    {
                        ptype: "app_nestedlayertree",
                        outputConfig: {
                            id: "layertree",
                            tbar: []
                        },
                        outputTarget: "tree",
                    }, {
                        ptype: "gxp_legend",
                        outputTarget: 'legend',
                        outputConfig: {title: null}
                    }, {
                        ptype: "gxp_addlayers",
                        actionTarget: "layertree.tbar"
                    }, {
                        ptype: "gxp_removelayer",
                        actionTarget: ["layertree.tbar", "layertree.contextMenu"]
                    }, {
                        ptype: "gxp_layerproperties",
                        actionTarget: ["layertree.tbar", "layertree.contextMenu"]
                    }, {
                        ptype: "gxp_zoomtolayerextent",
                        actionTarget: {target: "layertree.contextMenu", index: 0}
                    }, {
                        ptype: "gxp_zoom",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_navigation",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_zoomtoextent",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_navigationhistory",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_wmsgetfeatureinfo",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_measure",
                        actionTarget: "panel.tbar"
                    }, {
                        ptype: "gxp_print",
                        actionTarget: "panel.tbar",
                        printService: "/geoserver/pdf/"
                    }, {
                        ptype: "gxp_googleearth",
                        actionTarget: "panel.tbar",
                        apiKey: 'ABQIAAAATAm4oKT5m8cW4onm-2TxChQ2T1wbJWJepShu4qGcr7RZnG8xWRRqlE4x094ZdbzxFVgq1MmsBY8y-Q'
                        /*apiKey: 'ABQIAAAAeDjUod8ItM9dBg5_lz0esxTnme5EwnLVtEDGnh-lFVzRJhbdQhQBX5VH8Rb3adNACjSR5kaCLQuBmw'*/
                    }
                ],
                mapItems: [{
                    xtype: "gx_zoomslider",
                    vertical: true,
                    height: 100
                }],
                sources: {
                    google: {
                        ptype: "gxp_googlesource"
                    },
                    ol: {
                        ptype: "gxp_olsource"
                    },
                    gabon: {
                        ptype: "gxp_wmssource",
                        url: "/geoserver/ows",
                        version: "1.1.1"
                    }
                },
                map: {
                    id: "map",
                    border: false,
                    projection: "EPSG:900913",
                    units: "m",
                    maxResolution: 156543.0339,
                    maxExtent: [
                        -20037508.34, -20037508.34,
                        20037508.34, 20037508.34
                    ],
                    layers: [{
                        source: "google",
                        title: "Road Map",
                        name: "ROADMAP",
                        group: "background"
                    }, {
                        source: "google",
                        title: "Satellite Map",
                        name: "SATELLITE",
                        group: "background",
                        visibility: false
                    }, {
                        source: "google",
                        title: "Terrain Map",
                        name: "TERRAIN",
                        group: "background",
                        visibility: false
                    }, {
                        source: "gabon",
                        name: "gabonprovince:DEP",
                        title: "Province: DEP",
                        group: "P3"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Distric",
                        group: "C4",
                        title: "Province: Distric"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Equateur",
                        group: "C2",
                        title: "Province: Equateur"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:G-Dept",
                        group: "C3",
                        title: "Province: G-Dept"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:G-Prov",
                        group: "C3",
                        title: "Province: G-Prov"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Gares",
                        group: "C4",
                        title: "Province: Gares"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Hydro_imp",
                        title: "Province: Hydro_imp",
                        group: "C2"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Route",
                        group: "C1",
                        title: "Route étendu"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:Village",
                        title: "Province: Village",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:capital_dept",
                        title: "Province: capital_dept",
                        group: "C4"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:capital_prov",
                        group: "C4",
                        title: "Province: capital_prov"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:frontiere",
                        title: "Province: frontiere",
                        group: "C3"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:lim_Dept",
                        group: "C3",
                        title: "Province: lim_Dept"
                    }, {
                        source: "gabon",
                        name: "gabonprovince:topo_hydro",
                        title: "Province: topo_hydro",
                        group: "C4"
                    }, {
                        source: "gabon",
                        name: "tridex:Ville",
                        group: "P3"
                    }, {
                        source: "gabon",
                        name: "tridex:Village",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "tridex:Route",
                        group: "P1",
                        title: "Route étendu"
                    }, {
                        source: "gabon",
                        name: "tridex:Chemin_Fer",
                        group: "C2"
                    }, {
                        source: "gabon",
                        name: "tridex:Cote_Pt",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "tridex:Courbe",
                        group: "P2"
                    }, {
                        source: "gabon",
                        name: "tridex:Point_Ct",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "tridex:Norm_Hydro",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "tridex:Lac",
                        group: "P2"
                    }, {
                        source: "gabon",
                        name: "tridex:Ile",
                        group: "P2"
                    }, {
                        source: "gabon",
                        name: "tridex:Hydro_Poly",
                        group: "C2"
                    }, {
                        source: "gabon",
                        name: "tridex:Hydro_L",
                        group: "P2"
                    }, {
                        source: "gabon",
                        name: "tridex:Gare",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "parcel:Altimetrie",
                        group: "P2"
                    }, {
                        source: "gabon",
                        name: "parcel:PT_POLYGO",
                        group: "P4"
                    }, {
                        source: "gabon",
                        name: "parcel:Parcelles",
                        group: "P1"
                    }, {
                        source: "gabon",
                        name: "parcel:limits-Arron",
                        group: "P3"
                    }, {
                        source: "gabon",
                        name: "parcel:routes",
                        group: "P1"
                    }, {
                        source: "gabon",
                        name: "parcel:saisie",
                        group: "P1"
                    }, {
                        source: "ol",
                        group: "background",
                        fixed: true,
                        type: "OpenLayers.Layer",
                        args: [
                            "Aucun", {visibility: false}
                        ]
                    }],
                    center: [1294900, 19763],
                    zoom: 7
                }
            });

        </script

    </head>
    <body></body>
</html>
